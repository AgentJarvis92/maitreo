<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maitreo | Onboarding</title>
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <style>
        :root {
            --font-main: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            --c-bg: #121212;
        }
        body {
            font-family: var(--font-main);
            background-color: var(--c-bg);
            color: white;
            overflow-x: hidden;
            background-image:
                linear-gradient(160deg, rgba(0,0,0,0.62) 0%, rgba(0,0,0,0.75) 100%),
                url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2787&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
        }
        @media (max-width: 767px) {
            body {
                background-image:
                    linear-gradient(160deg, rgba(0,0,0,0.62) 0%, rgba(0,0,0,0.85) 100%),
                    url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2787&auto=format&fit=crop');
                height: 100vh;
                overflow: hidden;
            }
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #333; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        .glass-header {
            background: rgba(0,0,0,0.15);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .glass-panel {
            background: rgba(255,255,255,0.04);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 12px;
            box-shadow: 0 12px 56px rgba(0,0,0,0.32), 0 1px 0 rgba(255,255,255,0.04) inset;
        }
        @media (max-width: 767px) {
            .glass-panel { border-radius: 20px; }
        }
        .form-input {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            transition: border-color 0.2s ease, background 0.2s ease;
        }
        .form-input:focus {
            background: rgba(255,255,255,0.07);
            border-color: rgba(255,255,255,0.45);
            outline: none;
        }
        .progress-dot {
            width: 5px; height: 5px; border-radius: 50%;
            background: rgba(255,255,255,0.18);
            transition: background 0.2s;
        }
        @media (max-width: 767px) {
            .progress-dot { width: 4px; height: 4px; }
        }
        .progress-dot.active { background: rgba(255,255,255,0.85); }
        .progress-dot.active-green {
            background: #4ade80;
            box-shadow: 0 0 6px rgba(74,222,128,0.6);
            animation: pulse-green 1.8s ease-in-out infinite;
        }
        .progress-dot.done-green { background: #4ade80; }
        @keyframes pulse-green {
            0%, 100% { opacity: 1; box-shadow: 0 0 8px #00ff00; }
            50% { opacity: 0.4; box-shadow: 0 0 2px #00ff00; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @media (max-width: 767px) {
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
        }
        . { animation: fadeIn 0.6s ease-out both; }
        . { animation-delay: 0.1s; }
        . { animation-delay: 0.2s; }
        input::placeholder { color: rgba(255,255,255,0.2); }
        @media (max-width: 767px) {
            input::placeholder { font-size: 12px; }
            .form-input { font-size: 13px; }
        }

        /* OTP input */
        .otp-input {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            transition: border-color 0.2s ease, background 0.2s ease;
            letter-spacing: 0.5em;
            text-align: center;
            font-size: 24px;
            font-weight: 300;
        }
        .otp-input:focus {
            background: rgba(255,255,255,0.07);
            border-color: rgba(255,255,255,0.45);
            outline: none;
        }

        /* Checkmark animation */
        @keyframes checkStroke {
            to { stroke-dashoffset: 0; }
        }
        @keyframes checkScale {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        .check-circle { animation: checkScale 0.5s ease-out forwards; }
        .check-path {
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: checkStroke 0.4s ease-out 0.3s forwards;
        }

        .step-container { display: none; }
        .step-container.active { display: block; }

        /* Loading spinner */
        .spinner { border: 2px solid rgba(0,0,0,0.1); border-top-color: #000; border-radius: 50%; width: 16px; height: 16px; animation: spin 0.6s linear infinite; display: inline-block; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased selection:bg-white selection:text-black flex flex-col">

    <!-- Header -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-header px-8 py-5 md:flex items-center justify-between hidden">
        <div class="flex items-center gap-3">
            <img src="/logo.svg" width="28" height="28" alt="Maitreo">
            <span class="text-sm font-medium tracking-[0.15em] uppercase">Maitreo</span>
        </div>
    </nav>
    <!-- Mobile header -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-header px-5 py-4 flex items-center justify-between h-[60px] md:hidden">
        <div class="flex items-center gap-2">
            <img src="/logo.svg" width="22" height="22" alt="Maitreo">
            <span class="text-xs font-medium tracking-[0.15em] uppercase text-white">Maitreo</span>
        </div>
    </nav>

    <!-- ========== STEP 1: Restaurant Basics ========== -->
    <div id="step1" class="step-container active">
        <!-- Desktop -->
        <main class="hidden md:flex flex-grow items-center justify-center px-4 py-32 min-h-screen">
            <div class="w-full max-w-xl mx-auto relative z-10">
                <div class="text-center mb-10 ">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-4">Onboarding</span>
                    <div class="flex items-center justify-center gap-2 mb-10" id="dots1-desktop">
                        <div class="progress-dot active-green"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="text-5xl font-medium tracking-tight mb-4" style="letter-spacing: -0.02em;">Set up your restaurant</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed">You'll connect your Google Business Profile in the next step.</p>
                </div>
                <div class="glass-panel px-10 py-10  ">
                    <form id="form1-desktop" class="space-y-6">
                        <div class="group">
                            <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">Restaurant Name</label>
                            <input type="text" name="restaurantName" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="e.g. The Pepper Room" required>
                        </div>
                        <div class="group">
                            <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">Owner Name</label>
                            <input type="text" name="ownerName" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="First and Last Name" required>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="group">
                                <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">Email Address</label>
                                <input type="email" name="email" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="name@restaurant.com" required>
                            </div>
                            <div class="group">
                                <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">Phone Number</label>
                                <input type="tel" name="phone" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light phone-input" placeholder="(555) 000-0000" required>
                            </div>
                        </div>
                        <div class="group">
                            <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">Street Address</label>
                            <input type="text" name="street" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="123 Main Street" required>
                        </div>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="group">
                                <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">City</label>
                                <input type="text" name="city" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="New York" required>
                            </div>
                            <div class="group">
                                <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">State</label>
                                <input type="text" name="state" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="NY" maxlength="2" required>
                            </div>
                            <div class="group">
                                <label class="text-[10px] uppercase tracking-[0.15em] text-white/50 block mb-3 group-focus-within:text-white transition-colors">Zip</label>
                                <input type="text" name="zip" class="form-input w-full px-6 py-4 text-sm text-white placeholder-white/20 font-light" placeholder="10001" maxlength="5" required>
                        </div>
                        <div class="pt-3">
                            <button type="submit" id="btn1-desktop" class="w-full bg-white text-black h-14 font-bold uppercase tracking-[0.1em] text-xs hover:bg-gray-100 transition-colors duration-200">Continue</button>
                            <p class="mt-5 text-center text-[10px] uppercase tracking-[0.12em] text-white/25">Secure setup. Takes less than 2 minutes.</p>
                        </div>
                    </form>
                </div>
                <div class="mt-10 text-center  ">
                    <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10">
                        <a href="#" class="hover:text-white/20 transition-colors">Privacy</a>
                        <a href="#" class="hover:text-white/20 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
        <!-- Mobile -->
        <main class="md:hidden flex-grow flex flex-col items-center justify-center px-8 w-full h-screen pt-[60px] pb-4">
            <div class="w-full max-w-sm mx-auto flex flex-col justify-center h-full relative z-10">
                <div class="text-center mb-4  shrink-0">
                    <div class="flex items-center justify-center gap-2 mb-3">
                        <div class="progress-dot active-green"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="text-2xl font-medium tracking-tight mb-1 text-white" style="letter-spacing: -0.02em;">Set up your restaurant</h1>
                    <p class="text-xs text-white/50 font-light">Google Business Profile connection is next.</p>
                </div>
                <div class="glass-panel p-4   w-full shrink-0">
                    <form id="form1-mobile" class="flex flex-col gap-3">
                        <div class="group">
                            <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">Restaurant Name</label>
                            <input type="text" name="restaurantName" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="e.g. The Pepper Room" required>
                        </div>
                        <div class="group">
                            <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">Owner Name</label>
                            <input type="text" name="ownerName" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="First and Last Name" required>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="group">
                                <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">Email</label>
                                <input type="email" name="email" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="name@site.com" required>
                            </div>
                            <div class="group">
                                <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">Phone</label>
                                <input type="tel" name="phone" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg phone-input" placeholder="(555) 000-0000" required>
                            </div>
                        </div>
                        <div class="group">
                            <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">Street Address</label>
                            <input type="text" name="street" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="123 Main St" required>
                        </div>
                        <div class="grid grid-cols-3 gap-2">
                            <div>
                                <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">City</label>
                                <input type="text" name="city" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="NYC" required>
                            </div>
                            <div>
                                <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">State</label>
                                <input type="text" name="state" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="NY" maxlength="2" required>
                            </div>
                            <div>
                                <label class="text-[9px] uppercase tracking-[0.15em] text-white/50 block mb-1.5 transition-colors">Zip</label>
                                <input type="text" name="zip" class="form-input w-full px-3 py-2.5 text-sm text-white rounded-lg" placeholder="10001" maxlength="5" required>
                        </div>
                        <div class="pt-2">
                            <button type="submit" id="btn1-mobile" class="w-full bg-white text-black h-11 rounded-lg font-bold uppercase tracking-[0.1em] text-[10px] hover:bg-gray-100 transition-colors duration-200 shadow-lg shadow-white/5">Continue</button>
                        </div>
                    </form>
                </div>
                <div class="mt-4 text-center   shrink-0">
                    <div class="flex justify-center gap-5 text-[9px] uppercase tracking-widest text-white/20">
                        <a href="#" class="hover:text-white/40 transition-colors">Privacy</a>
                        <span class="w-1 h-1 rounded-full bg-white/10 self-center"></span>
                        <a href="#" class="hover:text-white/40 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ========== STEP 2: Verify Phone ========== -->
    <div id="step2" class="step-container">
        <!-- Desktop -->
        <main class="hidden md:flex flex-grow items-center justify-center px-4 py-32 min-h-screen">
            <div class="w-full max-w-xl mx-auto relative z-10">
                <div class="text-center mb-10 ">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-4">Onboarding</span>
                    <div class="flex items-center justify-center gap-2 mb-10">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active-green"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="text-5xl font-medium tracking-tight mb-4" style="letter-spacing: -0.02em;">Verify your phone</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed" id="otp-subtitle-desktop">We sent a 6-digit code to your email</p>
                </div>
                <div class="glass-panel px-10 py-10  ">
                    <div class="space-y-6">
                        <div class="flex justify-center">
                            <input type="text" id="otp-desktop" maxlength="6" class="otp-input w-64 px-6 py-4 text-white rounded-none" placeholder="000000" inputmode="numeric" autocomplete="one-time-code">
                        </div>
                        <div class="pt-3">
                            <button type="button" id="btn2-desktop" class="w-full bg-white text-black h-14 font-bold uppercase tracking-[0.1em] text-xs hover:bg-gray-100 transition-colors duration-200">Verify</button>
                            <p class="mt-5 text-center">
                                <button type="button" id="resend-desktop" class="text-[10px] uppercase tracking-[0.12em] text-white/40 hover:text-white/60 transition-colors">Resend code</button>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="mt-10 text-center  ">
                    <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10">
                        <a href="#" class="hover:text-white/20 transition-colors">Privacy</a>
                        <a href="#" class="hover:text-white/20 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
        <!-- Mobile -->
        <main class="md:hidden flex-grow flex flex-col items-center justify-center px-8 w-full h-screen pt-[60px] pb-4">
            <div class="w-full max-w-sm mx-auto flex flex-col justify-center h-full relative z-10">
                <div class="text-center mb-4  shrink-0">
                    <div class="flex items-center justify-center gap-2 mb-3">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active-green"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="text-2xl font-medium tracking-tight mb-1 text-white" style="letter-spacing: -0.02em;">Verify your phone</h1>
                    <p class="text-xs text-white/50 font-light" id="otp-subtitle-mobile">We sent a 6-digit code to your email</p>
                </div>
                <div class="glass-panel p-4   w-full shrink-0">
                    <div class="flex flex-col gap-3">
                        <div class="flex justify-center">
                            <input type="text" id="otp-mobile" maxlength="6" class="otp-input w-full px-3 py-2.5 text-white rounded-lg" placeholder="000000" inputmode="numeric" autocomplete="one-time-code">
                        </div>
                        <div class="pt-2">
                            <button type="button" id="btn2-mobile" class="w-full bg-white text-black h-11 rounded-lg font-bold uppercase tracking-[0.1em] text-[10px] hover:bg-gray-100 transition-colors duration-200 shadow-lg shadow-white/5">Verify</button>
                            <p class="mt-3 text-center">
                                <button type="button" id="resend-mobile" class="text-[9px] uppercase tracking-[0.12em] text-white/40 hover:text-white/60 transition-colors">Resend code</button>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="mt-4 text-center   shrink-0">
                    <div class="flex justify-center gap-5 text-[9px] uppercase tracking-widest text-white/20">
                        <a href="#" class="hover:text-white/40 transition-colors">Privacy</a>
                        <span class="w-1 h-1 rounded-full bg-white/10 self-center"></span>
                        <a href="#" class="hover:text-white/40 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ========== STEP 3: Stripe Payment ========== -->
    <div id="step3" class="step-container">
        <!-- Desktop -->
        <main class="hidden md:flex flex-grow items-center justify-center px-4 py-32 min-h-screen">
            <div class="w-full max-w-xl mx-auto relative z-10">
                <div class="text-center mb-10 ">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-4">Onboarding</span>
                    <div class="flex items-center justify-center gap-2 mb-10">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active-green"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="text-5xl font-medium tracking-tight mb-4" style="letter-spacing: -0.02em;">Start Your 14-Day Trial</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed max-w-md mx-auto">No contracts. Cancel anytime. You'll only be charged after your trial ends.</p>
                </div>
                <div class="glass-panel px-10 py-10  ">
                    <div class="flex flex-col">
                        <div class="flex flex-col items-center justify-center py-2">
                            <div class="flex items-start text-white relative left-2">
                                <span class="text-2xl mt-3 mr-2 font-light opacity-50">$</span>
                                <span class="text-[5rem] leading-none font-light tracking-tight">99</span>
                                <span class="text-xl mt-6 ml-2 font-light opacity-50">/mo</span>
                            </div>
                            <div class="mt-4 flex flex-col items-center gap-2">
                                <span class="text-[9px] uppercase tracking-[0.2em] text-white/30">Billed monthly after trial</span>
                                <span class="text-xs text-white/50 font-light">$0.00 due today</span>
                            </div>
                        </div>
                        <div class="w-full h-px bg-white/5 my-8"></div>
                        <div>
                            <button type="button" id="btn3-desktop" class="w-full bg-white text-black h-14 font-bold uppercase tracking-[0.1em] text-xs hover:bg-gray-100 transition-colors duration-200 shadow-lg">Continue to Secure Checkout</button>
                            <p class="mt-5 text-center text-[10px] uppercase tracking-[0.12em] text-white/25">Powered by Stripe. Your payment details are encrypted and secure.</p>
                        </div>
                    </div>
                </div>
                <div class="mt-10 text-center  ">
                    <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10">
                        <a href="#" class="hover:text-white/20 transition-colors">Privacy</a>
                        <a href="#" class="hover:text-white/20 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
        <!-- Mobile -->
        <main class="md:hidden flex-grow flex flex-col items-center justify-center px-8 w-full h-screen pt-[60px] pb-4">
            <div class="w-full max-w-sm mx-auto flex flex-col justify-center h-full relative z-10">
                <div class="text-center mb-4  shrink-0">
                    <span class="text-[10px] tracking-[0.25em] font-medium text-white/40 uppercase mb-4 block">Onboarding</span>
                    <div class="flex items-center gap-2.5 mb-6 justify-center">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active-green"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="text-3xl font-medium tracking-tight text-white mb-3 text-center leading-tight">Start Your<br>14-Day Trial</h1>
                    <p class="text-sm text-white/50 font-light leading-relaxed max-w-[260px] mx-auto">No contracts. Cancel anytime. You'll only be charged after your trial ends.</p>
                </div>
                <div class="glass-panel p-8   w-full shrink-0 flex flex-col items-center">
                    <div class="flex flex-col items-center justify-center py-2 mb-6 w-full">
                        <div class="flex items-start text-white relative left-1">
                            <span class="text-xl mt-2 mr-1 font-light opacity-50">$</span>
                            <span class="text-[4rem] leading-none font-light tracking-tight">99</span>
                            <span class="text-base mt-5 ml-1 font-light opacity-50">/mo</span>
                        </div>
                        <div class="mt-3 flex flex-col items-center gap-1.5">
                            <span class="text-[9px] uppercase tracking-[0.2em] text-white/30 font-medium">Billed monthly after trial</span>
                            <span class="text-xs text-white/50 font-light">$0.00 due today</span>
                        </div>
                    </div>
                    <div class="w-full h-px bg-white/10 mb-6"></div>
                    <div class="w-full">
                        <button type="button" id="btn3-mobile" class="w-full bg-white text-black h-12 rounded-[2px] font-bold uppercase tracking-[0.1em] text-[11px] hover:bg-gray-100 active:bg-gray-200 transition-colors duration-200 shadow-xl mb-4">Continue to Secure Checkout</button>
                        <p class="text-center text-[9px] uppercase tracking-[0.1em] text-white/20 leading-relaxed max-w-[240px] mx-auto">Powered by Stripe. Your payment details are encrypted and secure.</p>
                    </div>
                </div>
                <div class="mt-4 text-center   shrink-0">
                    <div class="flex justify-center gap-5 text-[9px] uppercase tracking-widest text-white/20">
                        <a href="#" class="hover:text-white/40 transition-colors">Privacy</a>
                        <span class="w-1 h-1 rounded-full bg-white/10 self-center"></span>
                        <a href="#" class="hover:text-white/40 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ========== STEP 4: Connect Google ========== -->
    <div id="step4" class="step-container">
        <!-- Desktop -->
        <main class="hidden md:flex flex-grow items-center justify-center px-4 py-32 min-h-screen">
            <div class="w-full max-w-xl mx-auto relative z-10">
                <div class="text-center mb-10 ">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-4">Onboarding</span>
                    <div class="flex items-center justify-center gap-2 mb-10">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active-green"></div>
                    </div>
                    <h1 class="text-5xl font-medium tracking-tight mb-4" style="letter-spacing: -0.02em;">Connect Your Google Business Profile</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed max-w-md mx-auto">We'll monitor your reviews and draft replies automatically. You can approve everything via SMS.</p>
                </div>
                <div class="glass-panel px-10 py-10  ">
                    <div class="space-y-6">
                        <div class="pt-2">
                            <button type="button" id="btn4-desktop" class="w-full bg-white text-black h-14 font-bold uppercase tracking-[0.1em] text-xs hover:bg-gray-100 transition-colors duration-200 shadow-lg">Connect Google</button>
                            <p class="mt-5 text-center text-[10px] uppercase tracking-[0.12em] text-white/25">Secure OAuth connection. We never post without your approval.</p>
                        </div>
                    </div>
                </div>
                <div class="mt-10 text-center  ">
                    <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10">
                        <a href="#" class="hover:text-white/20 transition-colors">Privacy</a>
                        <a href="#" class="hover:text-white/20 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
        <!-- Mobile -->
        <main class="md:hidden flex-grow flex flex-col items-center justify-center px-6 w-full h-screen pt-[60px] pb-8">
            <div class="w-full max-w-md mx-auto flex flex-col justify-center h-full relative z-10">
                <div class="flex flex-col items-center mb-8">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-4 font-medium">Onboarding</span>
                    <div class="flex items-center justify-center gap-2 mb-6">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active-green"></div>
                    </div>
                    <h1 class="text-3xl font-medium tracking-tight mb-4 text-center leading-tight">Connect Your Google Business Profile</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed text-center max-w-xs mx-auto">We'll monitor your reviews and draft replies automatically. You can approve everything via SMS.</p>
                </div>
                <div class="glass-panel p-6 w-full mb-4">
                    <div class="flex flex-col gap-4">
                        <button type="button" id="btn4-mobile" class="w-full bg-white text-black h-12 rounded-sm font-bold uppercase tracking-[0.1em] text-xs hover:bg-gray-100 transition-colors duration-200 shadow-lg flex items-center justify-center">Connect Google</button>
                        <p class="text-center text-[10px] uppercase tracking-[0.08em] text-white/25 leading-normal">Secure OAuth connection. We never post without your approval.</p>
                    </div>
                </div>
            </div>
            <div class="pb-8 shrink-0 z-10 text-center">
                <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10">
                    <a href="#" class="hover:text-white/30 transition-colors">Privacy</a>
                    <a href="#" class="hover:text-white/30 transition-colors">Terms</a>
                </div>
            </div>
        </main>
    </div>

    <!-- ========== STEP 5: All Set ========== -->
    <div id="step5" class="step-container">
        <!-- Desktop -->
        <main class="hidden md:flex flex-grow items-center justify-center px-4 py-32 min-h-screen">
            <div class="w-full max-w-xl mx-auto relative z-10">
                <div class="text-center mb-10 animate-fade-in opacity-0" style="animation-fill-mode: forwards;">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-4">Onboarding</span>
                    <div class="flex items-center justify-center gap-2 mb-8">
                        <div class="progress-dot done-green"></div>
                        <div class="progress-dot done-green"></div>
                        <div class="progress-dot done-green"></div>
                    </div>
                    <h1 class="text-5xl font-medium tracking-tight mb-4 text-white" style="letter-spacing: -0.02em;">You're Live.</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed max-w-md mx-auto">We're now monitoring your Google reviews.</p>
                    <div class="flex justify-center mt-5">
                        <div class="inline-flex items-center gap-3 px-4 py-2 bg-white/5 border border-white/10 rounded-full backdrop-blur-sm">
                            <div class="w-2 h-2 rounded-full bg-[#00ff00]" style="animation: pulse-green 2s ease-in-out infinite;"></div>
                            <span class="text-[10px] tracking-[0.1em] text-white/60">MONITORING</span>
                            <span id="platform-ticker" class="text-[10px] font-bold tracking-[0.1em] min-w-[60px] text-left text-white/80">GOOGLE...</span>
                        </div>
                    </div>
                </div>
                <div class="glass-panel px-10 py-10 animate-fade-in delay-100 opacity-0" style="animation-fill-mode: forwards;">
                    <div class="flex flex-col">
                        <div class="w-full rounded-lg border border-white/5 bg-white/[0.03] px-6 py-5">
                            <div class="mb-4">
                                <span class="text-[9px] tracking-[0.2em] text-white/25 uppercase">Maitreo</span>
                            </div>
                            <div class="space-y-1 mb-5">
                                <p class="text-sm text-white/80 font-light leading-relaxed">You're all set.</p>
                                <p class="text-sm text-white/60 font-light leading-relaxed">We'll text you when a new review comes in.</p>
                                <p class="text-sm text-white/40 font-light leading-relaxed">Reply HELP anytime for commands.</p>
                            </div>
                            <div class="h-px w-full bg-white/5 mb-3"></div>
                            <div class="flex items-center">
                                <span id="sms-footer-desktop" class="text-[10px] text-white/20 tracking-[0.08em] uppercase font-medium">Sent via SMS</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-center animate-fade-in delay-200 opacity-0" style="animation-fill-mode: forwards;">
                    <p class="text-[11px] text-white/20 tracking-[0.06em] font-light mb-8">You can close this tab. We'll handle the rest.</p>
                    <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10">
                        <a href="#" class="hover:text-white/20 transition-colors">Privacy</a>
                        <a href="#" class="hover:text-white/20 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
        <!-- Mobile -->
        <main class="md:hidden flex-grow flex flex-col items-center justify-center px-6 py-24 min-h-screen w-full">
            <div class="w-full max-w-sm mx-auto flex flex-col gap-8 relative z-10">
                <div class="text-center animate-fade-in opacity-0" style="animation-fill-mode: forwards;">
                    <span class="text-[10px] tracking-[0.25em] text-white/50 uppercase block mb-6">Onboarding</span>
                    <div class="flex items-center justify-center gap-3 mb-8">
                        <div class="progress-dot done-green"></div>
                        <div class="progress-dot done-green"></div>
                        <div class="progress-dot done-green"></div>
                    </div>
                    <h1 class="text-4xl font-medium tracking-tight mb-3 text-white" style="letter-spacing: -0.02em;">You're Live.</h1>
                    <p class="text-sm text-white/55 font-light leading-relaxed max-w-[280px] mx-auto">We're now monitoring your Google reviews.</p>
                    <div class="flex justify-center mt-6">
                        <div class="inline-flex items-center gap-3 px-4 py-2 bg-white/5 border border-white/10 rounded-full backdrop-blur-sm">
                            <div class="w-2 h-2 rounded-full bg-[#00ff00]" style="animation: pulse-green 2s ease-in-out infinite;"></div>
                            <span class="text-[10px] tracking-[0.1em] text-white/60">MONITORING</span>
                            <span class="text-[10px] font-bold tracking-[0.1em] text-white/80">GOOGLE...</span>
                        </div>
                    </div>
                </div>
                <div class="glass-panel px-6 py-8 animate-fade-in delay-100 opacity-0" style="animation-fill-mode: forwards;">
                    <div class="flex flex-col w-full">
                        <div class="rounded-lg border border-white/5 bg-white/[0.03] px-5 py-5 w-full">
                            <div class="mb-4">
                                <span class="text-[9px] tracking-[0.2em] text-white/25 uppercase font-medium">Maitreo</span>
                            </div>
                            <div class="space-y-2 mb-5">
                                <p class="text-sm text-white/80 font-light leading-relaxed">You're all set.</p>
                                <p class="text-sm text-white/60 font-light leading-relaxed">We'll text you when a new review comes in.</p>
                                <p class="text-sm text-white/40 font-light leading-relaxed">Reply HELP anytime for commands.</p>
                            </div>
                            <div class="h-px w-full bg-white/5 mb-3"></div>
                            <div class="flex items-center">
                                <span id="sms-footer-mobile" class="text-[10px] text-white/20 tracking-[0.08em] uppercase font-medium">Sent via SMS</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center animate-fade-in delay-200 opacity-0 pb-4" style="animation-fill-mode: forwards;">
                    <p class="text-[11px] text-white/20 tracking-[0.06em] font-light mb-8 max-w-[250px] mx-auto leading-relaxed">You can close this tab. We'll handle the rest.</p>
                    <div class="flex justify-center gap-6 text-[9px] uppercase tracking-widest text-white/10 font-medium">
                        <a href="#" class="hover:text-white/20 transition-colors">Privacy</a>
                        <a href="#" class="hover:text-white/20 transition-colors">Terms</a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Background overlay -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-[#121212]"></div>
    </div>

    <script>
    (function() {
        // Config
        const API_URL = window.location.hostname === 'localhost'
            ? 'http://localhost:3001'
            : 'https://restaurant-saas-backend-pbbx.onrender.com';

        const params = new URLSearchParams(window.location.search);
        const isDemo = params.get('demo') === 'true';
        let restaurantId = params.get('rid') || null;
        let phoneNumber = '';
        let formData = {};

        // In demo mode, disable HTML5 form validation so you can click through
        if (isDemo) {
            document.querySelectorAll('form').forEach(f => f.setAttribute('novalidate', ''));
        }

        // Step navigation
        function showStep(n) {
            document.querySelectorAll('.step-container').forEach(el => el.classList.remove('active'));
            document.getElementById('step' + n).classList.add('active');
            // Reset animations
            document.getElementById('step' + n).querySelectorAll('*').forEach(el => {
                el.style.animation = 'none';
                el.offsetHeight; // reflow
                el.style.animation = '';
            });
        }

        // Phone formatting
        function formatPhone(val) {
            const d = val.replace(/\D/g, '').slice(0, 10);
            if (d.length === 0) return '';
            if (d.length <= 3) return '(' + d;
            if (d.length <= 6) return '(' + d.slice(0,3) + ') ' + d.slice(3);
            return '(' + d.slice(0,3) + ') ' + d.slice(3,6) + '-' + d.slice(6);
        }

        function maskPhone(phone) {
            const d = phone.replace(/\D/g, '');
            if (d.length < 4) return '(xxx) xxx-xxxx';
            return '(xxx) xxx-' + d.slice(-4);
        }

        function maskEmail(email) {
            if (!email || !email.includes('@')) return 'your email';
            const parts = email.split('@');
            const local = parts[0];
            const domain = parts[1];
            if (local.length <= 2) return local[0] + '***@' + domain;
            return local[0] + '***@' + domain;
        }

        // Phone input formatting
        document.querySelectorAll('.phone-input').forEach(input => {
            input.addEventListener('input', function() {
                const pos = this.selectionStart;
                const prev = this.value;
                this.value = formatPhone(this.value);
            });
        });

        // Label focus behavior
        document.querySelectorAll('.group').forEach(group => {
            const input = group.querySelector('input');
            const label = group.querySelector('label');
            if (!input || !label) return;
            input.addEventListener('focus', () => label.style.color = 'white');
            input.addEventListener('blur', () => { if (!input.value) label.style.color = ''; });
        });

        // Button loading state
        function setLoading(btn, loading) {
            if (loading) {
                btn.disabled = true;
                btn.dataset.originalText = btn.innerHTML;
                btn.innerHTML = '<span class="spinner"></span>';
            } else {
                btn.disabled = false;
                btn.innerHTML = btn.dataset.originalText || btn.innerHTML;
            }
        }

        // Collect form data from whichever form is visible
        function getFormData() {
            const isMobile = window.innerWidth < 768;
            const form = document.getElementById(isMobile ? 'form1-mobile' : 'form1-desktop');
            const fd = new FormData(form);
            return {
                name: fd.get('restaurantName'),
                ownerName: fd.get('ownerName'),
                email: fd.get('email'),
                phone: fd.get('phone').replace(/\D/g, ''),
                address: (fd.get('street') || '') + ', ' + (fd.get('city') || '') + ', ' + (fd.get('state') || '') + ' ' + (fd.get('zip') || '')
            };
        }

        // ===== STEP 1 HANDLERS =====
        async function handleStep1(e) {
            e.preventDefault();
            formData = getFormData();
            phoneNumber = formData.phone;

            if (isDemo) { showStep(2); updateOtpSubtitle(); return; }

            const btn = e.target.querySelector('button[type="submit"]');
            setLoading(btn, true);
            try {
                const res = await fetch(API_URL + '/onboarding/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                const data = await res.json();
                if (!res.ok) throw new Error(data.message || 'Registration failed');
                restaurantId = data.restaurantId || data.rid;
                // Send OTP via email
                await fetch(API_URL + '/onboarding/otp/send', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ restaurantId, phone: formData.phone, email: formData.email })
                });
                showStep(2);
                updateOtpSubtitle();
            } catch (err) {
                alert(err.message);
            } finally {
                setLoading(btn, false);
            }
        }

        function updateOtpSubtitle() {
            const masked = maskEmail(formData.email);
            document.getElementById('otp-subtitle-desktop').textContent = 'We sent a 6-digit code to ' + masked;
            document.getElementById('otp-subtitle-mobile').textContent = 'We sent a 6-digit code to ' + masked;
        }

        document.getElementById('form1-desktop').addEventListener('submit', handleStep1);
        document.getElementById('form1-mobile').addEventListener('submit', handleStep1);

        // ===== STEP 2 HANDLERS =====
        async function handleStep2() {
            if (isDemo) { showStep(3); return; }
            const isMobile = window.innerWidth < 768;
            const otp = document.getElementById(isMobile ? 'otp-mobile' : 'otp-desktop').value.trim();
            if (otp.length !== 6) { alert('Please enter the 6-digit code'); return; }

            const btn = document.getElementById(isMobile ? 'btn2-mobile' : 'btn2-desktop');
            setLoading(btn, true);
            try {
                const res = await fetch(API_URL + '/onboarding/otp/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ restaurantId, code: otp })
                });
                const data = await res.json();
                if (!res.ok) throw new Error(data.error || 'Verification failed');
                showStep(3);
            } catch (err) {
                alert(err.message);
            } finally {
                setLoading(btn, false);
            }
        }

        async function handleResend() {
            if (isDemo) return;
            try {
                await fetch(API_URL + '/onboarding/otp/send', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ restaurantId, phone: phoneNumber, email: formData.email })
                });
                alert('Code resent!');
            } catch (err) {
                alert('Failed to resend code');
            }
        }

        document.getElementById('btn2-desktop').addEventListener('click', handleStep2);
        document.getElementById('btn2-mobile').addEventListener('click', handleStep2);
        document.getElementById('resend-desktop').addEventListener('click', handleResend);
        document.getElementById('resend-mobile').addEventListener('click', handleResend);

        // OTP: only allow digits
        document.querySelectorAll('#otp-desktop, #otp-mobile').forEach(input => {
            input.addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '').slice(0, 6);
            });
        });

        // ===== STEP 3 HANDLERS =====
        async function handleStep3() {
            if (isDemo) { showStep(4); return; }
            const isMobile = window.innerWidth < 768;
            const btn = document.getElementById(isMobile ? 'btn3-mobile' : 'btn3-desktop');
            setLoading(btn, true);
            try {
                const res = await fetch(API_URL + '/onboarding/stripe/create-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ restaurantId })
                });
                const data = await res.json();
                if (!res.ok) throw new Error(data.error || 'Failed to create checkout session');
                if (data.url) window.location.href = data.url;
            } catch (err) {
                alert(err.message);
            } finally {
                setLoading(btn, false);
            }
        }

        document.getElementById('btn3-desktop').addEventListener('click', handleStep3);
        document.getElementById('btn3-mobile').addEventListener('click', handleStep3);

        // ===== STEP 4 HANDLERS =====
        async function handleStep4() {
            if (isDemo) { showStep(5); return; }
            window.location.href = API_URL + '/auth/google/start?rid=' + restaurantId;
        }

        document.getElementById('btn4-desktop').addEventListener('click', handleStep4);
        document.getElementById('btn4-mobile').addEventListener('click', handleStep4);

        // ===== RESUME LOGIC =====
        async function checkResume() {
            if (isDemo || !restaurantId) return;
            try {
                const res = await fetch(API_URL + '/onboarding/status?rid=' + restaurantId);
                if (!res.ok) return;
                const data = await res.json();
                const step = data.step || data.currentStep || 1;
                if (step > 1 && step <= 5) showStep(step);
            } catch (err) {
                // Silent fail
            }
        }

        if (restaurantId && !isDemo) checkResume();

        // ===== STEP 5: Complete =====
        async function completeOnboarding() {
            if (isDemo || !restaurantId) return;
            try {
                await fetch(API_URL + '/onboarding/complete', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ restaurantId })
                });
            } catch (err) {
                // Silent
            }
        }

        // Watch for step 5 becoming active
        const observer = new MutationObserver(() => {
            if (document.getElementById('step5').classList.contains('active')) {
                completeOnboarding();
                // Populate SMS footer with masked phone
                if (phoneNumber) {
                    const d = phoneNumber.replace(/\D/g, '');
                    const last4 = d.slice(-4);
                    const footer = 'Sent via SMS  (' + d.slice(0,3) + ')  ' + last4;
                    const desktopFooter = document.getElementById('sms-footer-desktop');
                    const mobileFooter = document.getElementById('sms-footer-mobile');
                    if (desktopFooter) desktopFooter.textContent = footer;
                    if (mobileFooter) mobileFooter.textContent = footer;
                }
                // Platform ticker
                const ticker = document.getElementById('platform-ticker');
                if (ticker) {
                    const platforms = ['GOOGLE'];
                    let idx = 0;
                    setInterval(() => {
                        idx = (idx + 1) % platforms.length;
                        ticker.textContent = platforms[idx] + '...';
                    }, 3000);
                }
            }
        });
        observer.observe(document.getElementById('step5'), { attributes: true, attributeFilter: ['class'] });

    })();
    </script>
</body>
</html>
